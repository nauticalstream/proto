syntax = "proto3";

package workspace.v1;

option go_package = "github.com/nauticalstream/proto/gen/go/workspace/v1";

// ============================================
// ENUMS
// ============================================

enum WorkspaceStatus {
  WORKSPACE_STATUS_UNSPECIFIED = 0;
  WORKSPACE_STATUS_DRAFT = 1;
  WORKSPACE_STATUS_PUBLISHED = 2;
  WORKSPACE_STATUS_UNPUBLISHED = 3;
  WORKSPACE_STATUS_SUSPENDED = 4;
}

// ============================================
// WORKSPACE FULL MODEL
// ============================================

// Full workspace model (matches Prisma schema and used for enrichment)
message Workspace {
  string id = 1;
  string name = 2;
  string handle = 3;
  optional string description = 4;
  WorkspaceStatus status = 5;
  optional int32 category_id = 6;
  string created_by = 7;
  string created_at = 8; // ISO 8601 datetime string
  string updated_at = 9; // ISO 8601 datetime string
  optional string website = 10;
  optional string avatar = 11; // For enrichment display
  optional double latitude = 12; // Workspace location latitude
  optional double longitude = 13; // Workspace location longitude
  optional string tenant_id = 14; // Multi-tenant isolation
}

// ============================================
// REQUEST/RESPONSE (EventBus RPC Patterns)
// ============================================

// Get workspace by ID
message GetWorkspaceRequest {
  optional string id = 1;
}

message GetWorkspaceResponse {
  optional Workspace workspace = 1;
}

// List multiple workspaces by IDs
message ListWorkspacesRequest {
  repeated string ids = 1;
}

message ListWorkspacesResponse {
  repeated Workspace workspaces = 1;
}

// ============================================
// EVENTS
// ============================================

// Event: Workspace created
message WorkspaceCreated {
  Workspace workspace = 1;
}

// Event: Workspace updated
message WorkspaceUpdated {
  Workspace workspace = 1;
}

// Event: Workspace deleted
message WorkspaceDeleted {
  string id = 1;
  string deleted_by = 2;
  string deleted_at = 3; // ISO 8601 datetime string
}

// Event: Workspace published
message WorkspacePublished {
  string id = 1;
  string published_at = 2; // ISO 8601 datetime string
}

// Event: Workspace unpublished
message WorkspaceUnpublished {
  string id = 1;
  string unpublished_at = 2; // ISO 8601 datetime string
}

// Event: Workspace suspended
message WorkspaceSuspended {
  string id = 1;
  string suspended_at = 2; // ISO 8601 datetime string
}
