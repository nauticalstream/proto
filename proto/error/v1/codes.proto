syntax = "proto3";

package error.v1;

option go_package = "github.com/nauticalstream/proto/gen/go/error/v1";

/**
 * Error severity levels
 * Indicates to client whether error is retryable
 */
enum ErrorSeverity {
  ERROR_SEVERITY_UNSPECIFIED = 0;
  ERROR_SEVERITY_CLIENT_ERROR = 1;  // Client error: don't retry (4xx)
  ERROR_SEVERITY_RETRYABLE = 2;     // Server error: safe to retry (5xx)
  ERROR_SEVERITY_FATAL = 3;         // Permanent failure: don't retry
}

/**
 * Standard error codes for all operations
 * Using 10000-gap ranges for scalability in large systems
 * Ranges:
 *   10000-19999: Validation errors
 *   20000-29999: Authentication/Authorization errors
 *   30000-39999: Resource/Not Found errors
 *   40000-49999: Rate limiting/Quota errors
 *   50000-59999: Service/Internal errors
 */
enum ErrorCode {
  ERROR_CODE_UNSPECIFIED = 0;

  // Validation errors (10000-19999)
  ERROR_CODE_VALIDATION_ERROR = 10000;
  ERROR_CODE_INVALID_FIELD = 10001;
  ERROR_CODE_MISSING_FIELD = 10002;
  ERROR_CODE_CONSTRAINT_VIOLATION = 10003;

  // Auth/Permission errors (20000-29999)
  ERROR_CODE_UNAUTHORIZED = 20000;
  ERROR_CODE_PERMISSION_DENIED = 20001;
  ERROR_CODE_NOT_PARTICIPANT = 20002;
  ERROR_CODE_INSUFFICIENT_PERMISSIONS = 20003;

  // Resource errors (30000-39999)
  ERROR_CODE_NOT_FOUND = 30000;
  ERROR_CODE_ALREADY_EXISTS = 30001;
  ERROR_CODE_CONFLICT = 30002;
  ERROR_CODE_RESOURCE_DELETED = 30003;

  // Rate limiting/Quota (40000-49999)
  ERROR_CODE_RATE_LIMIT_EXCEEDED = 40000;
  ERROR_CODE_QUOTA_EXCEEDED = 40001;
  ERROR_CODE_THROTTLED = 40002;

  // Service/Internal errors (50000-59999)
  ERROR_CODE_INTERNAL_ERROR = 50000;
  ERROR_CODE_SERVICE_UNAVAILABLE = 50001;
  ERROR_CODE_DEADLINE_EXCEEDED = 50002;
  ERROR_CODE_DEPENDENCY_FAILED = 50003;
}

/**
 * Resource types that can fail operations
 * Used to provide context about what resource the error relates to
 */
enum ResourceType {
  RESOURCE_TYPE_UNSPECIFIED = 0;
  RESOURCE_TYPE_MESSAGE = 1;
  RESOURCE_TYPE_CONVERSATION = 2;
  RESOURCE_TYPE_PARTICIPANT = 3;
  RESOURCE_TYPE_USER = 4;
  RESOURCE_TYPE_WORKSPACE = 5;
}
